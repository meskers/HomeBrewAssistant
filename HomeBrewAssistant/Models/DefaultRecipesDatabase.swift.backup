import Foundation

// MARK: - Enhanced Recipe Database with Award-Winning Recipes
struct DefaultRecipesDatabase {
    
    // MARK: - Public Interface
    
    /// Get all recipe categories organized for optimal user experience
    static func getAllRecipeCategories() -> [RecipeCategory] {
        return [
            getBeginnerFriendlyCategory(),
            getDutchClassicsCategory(),
            getWorldFavoritesCategory(),
            getSeasonalSpecialsCategory(),
            getCommercialClonesCategory(),
            getAwardWinnersCategory(),
            getAdvancedBrewingCategory()
        ]
    }
    
    /// Get all recipes in a flat array (legacy support)
    static func getAllDefaultRecipes() -> [DetailedRecipe] {
        return getAllRecipeCategories().flatMap { $0.recipes }
    }
    
    /// Get recommended starter recipes for new users
    static func getStarterRecommendations() -> [DetailedRecipe] {
        return [
            americanWheatBeer(),
            americanPaleAle(),
            irishRedAle(),
            nederlandsePilsner()
        ]
    }
    
    // MARK: - Recipe Categories
    
    private static func getBeginnerFriendlyCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "beginner",
            name: "Perfect voor Beginners",
            nameEN: "Perfect for Beginners",
            icon: "graduationcap.fill",
            color: .green,
            description: "Makkelijke recepten met gegarandeerd succes. Ideaal voor je eerste brouwervaringen.",
            descriptionEN: "Easy recipes with guaranteed success. Perfect for your first brewing experiences.",
            recipes: [
                americanWheatBeer(),
                blondeAle(),
                americanPaleAle(),
                irishRedAle(),
                englishBitter(),
                germanHefeweizen()
            ],
            displayOrder: 1
        )
    }
    
    private static func getDutchClassicsCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "dutch",
            name: "Nederlandse Klassiekers",
            nameEN: "Dutch Classics",
            icon: "flag.fill",
            color: .orange,
            description: "Authentieke Nederlandse bierstijlen die perfect passen bij onze smaak.",
            descriptionEN: "Authentic Dutch beer styles that perfectly match our taste preferences.",
            recipes: [
                nederlandsePilsner(),
                nederlandseBokbier(),
                nederlandsWitbier(),
                nederlandseIPA(),
                amsterdamAmber(),
                hollandseHerfstAle()
            ],
            displayOrder: 2
        )
    }
    
    private static func getWorldFavoritesCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "world",
            name: "Wereldwijde Favorieten",
            nameEN: "World Favorites",
            icon: "globe",
            color: .blue,
            description: "De meest populaire bierstijlen van over de hele wereld.",
            descriptionEN: "The most popular beer styles from around the world.",
            recipes: [
                americanIPA(),
                czechPilsner(),
                belgischeDubbel(),
                irishStout(),
                germanLager(),
                kolsch(),
                saison(),
                porter()
            ],
            displayOrder: 3
        )
    }
    
    private static func getSeasonalSpecialsCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "seasonal",
            name: "Seizoen Specials",
            nameEN: "Seasonal Specials",
            icon: "calendar",
            color: .purple,
            description: "Perfecte bierstijlen voor elk seizoen van het jaar.",
            descriptionEN: "Perfect beer styles for every season of the year.",
            recipes: [
                oktoberfest(),
                winterWarmer(),
                summerWheat(),
                christmasAle(),
                springPils(),
                harvestAle()
            ],
            displayOrder: 4
        )
    }
    
    private static func getCommercialClonesCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "clones",
            name: "Beroemde Brouwerijen",
            nameEN: "Famous Brewery Clones",
            icon: "building.2.fill",
            color: .indigo,
            description: "Homebrew versies van wereldberoemde bieren.",
            descriptionEN: "Homebrew versions of world-famous beers.",
            recipes: [
                treeHouseJulius(),
                bellsTwoHearted(),
                sierraNevadasPaleAle(),
                guinnessDraught(),
                stellaArtoisClone(),
                heinekenClone(),
                duvelClone(),
                westmalleDoubleClone()
            ],
            displayOrder: 5
        )
    }
    
    private static func getAwardWinnersCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "awards",
            name: "Award Winners",
            nameEN: "Award Winners",
            icon: "trophy.fill",
            color: .yellow,
            description: "Goud medaille winnende recepten van internationale competities.",
            descriptionEN: "Gold medal winning recipes from international competitions.",
            recipes: [
                goldMedalIPA(),
                championPilsner(),
                awardWinningStout(),
                medalWinningWheat(),
                prizePorter(),
                victoryVienna()
            ],
            displayOrder: 6
        )
    }
    
    private static func getAdvancedBrewingCategory() -> RecipeCategory {
        return RecipeCategory(
            id: "advanced",
            name: "Expert Niveau",
            nameEN: "Expert Level",
            icon: "flask.fill",
            color: .red,
            description: "Complexe brouwprocessen voor ervaren thuisbrouwers.",
            descriptionEN: "Complex brewing processes for experienced homebrewers.",
            recipes: [
                belgianQuad(),
                barleywine(),
                imperialStout(),
                sourBeer(),
                wildAle(),
                complexLambic()
            ],
            displayOrder: 7
        )
    }
    
    // MARK: - Beginner Friendly Recipes
    
    private static func americanWheatBeer() -> DetailedRecipe {
        DetailedRecipe(
            id: "american-wheat",
            name: "American Wheat Beer",
            nameNL: "Amerikaanse Tarwebier",
            style: "American Wheat Beer",
            styleNL: "Amerikaans Tarwebier",
            abv: 4.8,
            ibu: 18,
            srm: 3,
            difficulty: .beginner,
            brewTime: 180,
            successRate: 97,
            popularity: 4.6,
            ingredients: [
                RecipeIngredient(name: "Wheat Malt", nameNL: "Tarwemout", amount: "2.2 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "2-Row Pale Malt", nameNL: "2-Row Pale Mout", amount: "1.8 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Willamette Hops", nameNL: "Willamette Hop", amount: "15 g", type: .hop, timing: "60 min"),
                RecipeIngredient(name: "Willamette Hops", nameNL: "Willamette Hop", amount: "10 g", type: .hop, timing: "5 min"),
                RecipeIngredient(name: "SafAle US-05", nameNL: "SafAle US-05", amount: "1 pak", type: .yeast, timing: "Fermentatie")
            ],
            instructions: [
                "Heat 13L water to 67°C",
                "Add crushed malt, mash 60 minutes at 65°C",
                "Sparge with 15L water at 78°C",
                "Boil 60 minutes, add hops according to schedule",
                "Cool rapidly to 19°C",
                "Ferment 1 week at 19°C",
                "Bottle conditioning 2 weeks"
            ],
            instructionsNL: [
                "Verwarm 13L water tot 67°C",
                "Voeg gemalen mout toe, mash 60 minuten op 65°C",
                "Spoel met 15L water van 78°C",
                "Kook 60 minuten, voeg hop toe volgens schema",
                "Koel snel af tot 19°C",
                "Fermenteer 1 week op 19°C",
                "Flesrijping 2 weken"
            ],
            notes: "Perfect starter beer - forgiving process with clean flavors. Great base for fruit additions.",
            notesNL: "Perfect startbier - vergeeflijk proces met schone smaken. Uitstekende basis voor fruittoevoegingen.",
            tips: [
                "Use reverse osmosis water for best results",
                "Keep fermentation temperature steady",
                "Great with lemon or orange garnish"
            ],
            tipsNL: [
                "Gebruik omgekeerde osmose water voor beste resultaten",
                "Houd fermentatietemperatuur stabiel",
                "Heerlijk met citroen of sinaasappel garnering"
            ],
            tags: ["beginner", "wheat", "american", "summer", "easy"],
            source: "Adapted from AHA recipe collection",
            category: "beginner"
        )
    }
    
    private static func blondeAle() -> DetailedRecipe {
        DetailedRecipe(
            id: "blonde-ale",
            name: "Classic Blonde Ale",
            nameNL: "Klassieke Blonde Ale",
            style: "Blonde Ale",
            styleNL: "Blonde Ale",
            abv: 5.1,
            ibu: 22,
            srm: 4,
            difficulty: .beginner,
            brewTime: 180,
            successRate: 95,
            popularity: 4.4,
            ingredients: [
                RecipeIngredient(name: "2-Row Pale Malt", nameNL: "2-Row Pale Mout", amount: "4.0 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Munich Malt", nameNL: "Münchener Mout", amount: "0.3 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Centennial Hops", nameNL: "Centennial Hop", amount: "20 g", type: .hop, timing: "60 min"),
                RecipeIngredient(name: "Cascade Hops", nameNL: "Cascade Hop", amount: "15 g", type: .hop, timing: "15 min"),
                RecipeIngredient(name: "SafAle US-05", nameNL: "SafAle US-05", amount: "1 pak", type: .yeast, timing: "Fermentatie")
            ],
            instructions: [
                "Single infusion mash at 66°C for 60 minutes",
                "Sparge and collect 25L wort",
                "Boil 60 minutes with hop schedule", 
                "Cool to 18°C and pitch yeast",
                "Ferment 7-10 days at 18°C",
                "Package and condition 2 weeks"
            ],
            instructionsNL: [
                "Single infusion mash op 66°C gedurende 60 minuten",
                "Spoel en verzamel 25L wort",
                "Kook 60 minuten met hop schema",
                "Koel tot 18°C en voeg gist toe",
                "Fermenteer 7-10 dagen op 18°C",
                "Verpak en conditioneer 2 weken"
            ],
            notes: "Easy-drinking beer perfect for introducing friends to craft beer. Clean malt character with subtle hop presence.",
            notesNL: "Makkelijk drinkbaar bier perfect om vrienden te introduceren tot craft beer. Schone moutkarakter met subtiele hop aanwezigheid.",
            tips: [
                "Don't over-hop - simplicity is key",
                "Serve at 4-6°C for best flavor",
                "Perfect for BBQ and outdoor events"
            ],
            tipsNL: [
                "Niet te veel hop - eenvoud is de sleutel",
                "Serveer op 4-6°C voor beste smaak",
                "Perfect voor BBQ en buitenevenementen"
            ],
            tags: ["beginner", "blonde", "easy", "crowd-pleaser"],
            source: "Classic homebrew recipe",
            category: "beginner"
        )
    }
    
    // MARK: - Dutch Classics
    
    private static func nederlandsePilsner() -> DetailedRecipe {
        DetailedRecipe(
            id: "nederlandse-pilsner",
            name: "Nederlandse Premium Pilsner",
            nameNL: "Nederlandse Premium Pilsner",
            style: "Dutch Pilsner",
            styleNL: "Nederlandse Pilsner",
            abv: 5.1,
            ibu: 28,
            srm: 3,
            difficulty: .intermediate,
            brewTime: 240,
            successRate: 89,
            popularity: 4.8,
            ingredients: [
                RecipeIngredient(name: "Dutch Pilsner Malt", nameNL: "Nederlandse Pilsner Mout", amount: "4.2 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Saaz Hops", nameNL: "Saaz Hop", amount: "25 g", type: .hop, timing: "60 min"),
                RecipeIngredient(name: "Hallertau Hops", nameNL: "Hallertau Hop", amount: "15 g", type: .hop, timing: "15 min"),
                RecipeIngredient(name: "SafLager W-34/70", nameNL: "SafLager W-34/70", amount: "1 pak", type: .yeast, timing: "Fermentatie"),
                RecipeIngredient(name: "Gypsum", nameNL: "Gips", amount: "2 g", type: .other, timing: "Water treatment")
            ],
            instructions: [
                "Heat 13L water to 67°C with water treatment",
                "Add crushed malt, mash 60 minutes at 65°C",
                "Sparge with 15L water at 78°C",
                "Boil 60 minutes, add hops according to schedule",
                "Cool rapidly to 10°C",
                "Ferment 2 weeks at 10°C",
                "Lager 4-6 weeks at 2°C",
                "Bottle conditioning 2 weeks"
            ],
            instructionsNL: [
                "Verwarm 13L water tot 67°C met waterbehandeling",
                "Voeg gemalen mout toe, mash 60 minuten op 65°C",
                "Spoel met 15L water van 78°C",
                "Kook 60 minuten, voeg hop toe volgens schema",
                "Koel snel af tot 10°C",
                "Fermenteer 2 weken op 10°C",
                "Lager 4-6 weken op 2°C",
                "Flesrijping 2 weken"
            ],
            notes: "Authentic Dutch pilsner with soft hop bitterness and crisp finish. The perfect representation of Dutch brewing tradition.",
            notesNL: "Authentieke Nederlandse pilsner met zachte hopbitterheid en frisse afdronk. De perfecte vertegenwoordiging van de Nederlandse brouwtraditie.",
            tips: [
                "Temperature control is crucial for lagers",
                "Use soft water profile",
                "Allow proper lagering time for smooth finish"
            ],
            tipsNL: [
                "Temperatuurcontrole is cruciaal voor lagers",
                "Gebruik zacht waterprofiel",
                "Zorg voor voldoende lagertijd voor zachte afdronk"
            ],
            tags: ["dutch", "pilsner", "lager", "classic", "traditional"],
            source: "Traditional Dutch brewery recipe",
            category: "dutch"
        )
    }
    
    private static func nederlandseIPA() -> DetailedRecipe {
        DetailedRecipe(
            id: "nederlandse-ipa",
            name: "Nederlandse Hop Sensatie IPA",
            nameNL: "Nederlandse Hop Sensatie IPA",
            style: "Dutch IPA",
            styleNL: "Nederlandse IPA",
            abv: 6.2,
            ibu: 55,
            srm: 6,
            difficulty: .intermediate,
            brewTime: 210,
            successRate: 91,
            popularity: 4.7,
            ingredients: [
                RecipeIngredient(name: "Pilsner Malt", nameNL: "Pilsner Mout", amount: "4.5 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Munich Malt", nameNL: "Münchener Mout", amount: "0.5 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Mandarina Bavaria", nameNL: "Mandarina Bavaria", amount: "30 g", type: .hop, timing: "60 min"),
                RecipeIngredient(name: "Hallertau Blanc", nameNL: "Hallertau Blanc", amount: "40 g", type: .hop, timing: "10 min"),
                RecipeIngredient(name: "Mandarina Bavaria", nameNL: "Mandarina Bavaria", amount: "25 g", type: .hop, timing: "Whirlpool"),
                RecipeIngredient(name: "Hallertau Blanc", nameNL: "Hallertau Blanc", amount: "30 g", type: .hop, timing: "Dry hop"),
                RecipeIngredient(name: "SafAle US-05", nameNL: "SafAle US-05", amount: "1 pak", type: .yeast, timing: "Fermentatie")
            ],
            instructions: [
                "Single infusion mash at 66°C for 60 minutes",
                "Sparge and collect 25L wort",
                "Boil 60 minutes with hop schedule",
                "Whirlpool hops at 80°C for 20 minutes",
                "Cool to 18°C and pitch yeast",
                "Ferment 5 days at 18°C",
                "Dry hop for 3 days",
                "Package and condition 2 weeks"
            ],
            instructionsNL: [
                "Single infusion mash op 66°C gedurende 60 minuten",
                "Spoel en verzamel 25L wort",
                "Kook 60 minuten met hop schema",
                "Whirlpool hop op 80°C gedurende 20 minuten",
                "Koel tot 18°C en voeg gist toe",
                "Fermenteer 5 dagen op 18°C",
                "Dry hop gedurende 3 dagen",
                "Verpak en conditioneer 2 weken"
            ],
            notes: "Modern Dutch IPA showcasing German hop varieties with tropical and citrus notes. Balanced bitterness with European character.",
            notesNL: "Moderne Nederlandse IPA die Duitse hopvariëteiten toont met tropische en citrusaroma's. Gebalanceerde bitterheid met Europees karakter.",
            tips: [
                "Use German hop varieties for unique character",
                "Keep dry hop temperature cool",
                "Perfect hop-malt balance is key"
            ],
            tipsNL: [
                "Gebruik Duitse hopvariëteiten voor uniek karakter",
                "Houd dry hop temperatuur koel",
                "Perfecte hop-mout balans is de sleutel"
            ],
            tags: ["dutch", "ipa", "modern", "german-hops", "citrus"],
            source: "Modern Dutch brewing innovation",
            category: "dutch"
        )
    }
    
    // MARK: - Commercial Clones
    
    private static func treeHouseJulius() -> DetailedRecipe {
        DetailedRecipe(
            id: "treehouse-julius",
            name: "Tree House Julius Clone",
            nameNL: "Tree House Julius Kloon",
            style: "New England IPA",
            styleNL: "New England IPA",
            abv: 6.8,
            ibu: 68,
            srm: 5,
            difficulty: .advanced,
            brewTime: 240,
            successRate: 82,
            popularity: 4.9,
            ingredients: [
                RecipeIngredient(name: "2-Row Pale Malt", nameNL: "2-Row Pale Mout", amount: "4.5 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "White Wheat Malt", nameNL: "Witte Tarwemout", amount: "0.7 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Flaked Oats", nameNL: "Havervlokken", amount: "0.3 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Citra Hops", nameNL: "Citra Hop", amount: "15 g", type: .hop, timing: "60 min"),
                RecipeIngredient(name: "Citra Hops", nameNL: "Citra Hop", amount: "40 g", type: .hop, timing: "Whirlpool"),
                RecipeIngredient(name: "Mosaic Hops", nameNL: "Mosaic Hop", amount: "40 g", type: .hop, timing: "Whirlpool"),
                RecipeIngredient(name: "Citra Hops", nameNL: "Citra Hop", amount: "60 g", type: .hop, timing: "Dry hop 1"),
                RecipeIngredient(name: "Mosaic Hops", nameNL: "Mosaic Hop", amount: "60 g", type: .hop, timing: "Dry hop 2"),
                RecipeIngredient(name: "London Ale III", nameNL: "London Ale III", amount: "1 pak", type: .yeast, timing: "Fermentatie")
            ],
            instructions: [
                "Mash at 67°C for 60 minutes (higher for body)",
                "Sparge carefully to avoid astringency",
                "Boil 60 minutes with minimal hop additions",
                "Whirlpool at 80°C for 30 minutes",
                "Cool to 18°C, pitch yeast",
                "Ferment 4 days at 18°C",
                "First dry hop addition for 2 days",
                "Second dry hop addition for 2 days",
                "Package under CO2, serve fresh"
            ],
            instructionsNL: [
                "Mash op 67°C gedurende 60 minuten (hoger voor body)",
                "Spoel voorzichtig om adstringentie te vermijden",
                "Kook 60 minuten met minimale hop toevoegingen",
                "Whirlpool op 80°C gedurende 30 minuten",
                "Koel tot 18°C, voeg gist toe",
                "Fermenteer 4 dagen op 18°C",
                "Eerste dry hop toevoeging gedurende 2 dagen",
                "Tweede dry hop toevoeging gedurende 2 dagen",
                "Verpak onder CO2, serveer vers"
            ],
            notes: "Legendary NEIPA known for its intense tropical hop character and pillowy mouthfeel. Drink fresh for maximum hop impact.",
            notesNL: "Legendarische NEIPA bekend om zijn intense tropische hop karakter en fluffy mondgevoel. Drink vers voor maximale hop impact.",
            tips: [
                "Water chemistry is crucial - use chloride-heavy profile",
                "Keep oxygen exposure minimal",
                "Serve at 4°C for best experience"
            ],
            tipsNL: [
                "Waterchemie is cruciaal - gebruik chloride-rijk profiel",
                "Houd zuurstofblootstelling minimaal",
                "Serveer op 4°C voor beste ervaring"
            ],
            tags: ["clone", "neipa", "treehouse", "hazy", "tropical"],
            source: "Adapted from Tree House Brewing Co.",
            category: "clones"
        )
    }
    
    // MARK: - Award Winners
    
    private static func goldMedalIPA() -> DetailedRecipe {
        DetailedRecipe(
            id: "gold-medal-ipa",
            name: "Championship American IPA",
            nameNL: "Kampioen Amerikaanse IPA",
            style: "American IPA",
            styleNL: "Amerikaanse IPA",
            abv: 6.8,
            ibu: 65,
            srm: 8,
            difficulty: .intermediate,
            brewTime: 210,
            successRate: 94,
            popularity: 4.8,
            ingredients: [
                RecipeIngredient(name: "2-Row Pale Malt", nameNL: "2-Row Pale Mout", amount: "5.0 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Crystal 60L", nameNL: "Crystal 60L", amount: "0.4 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Munich Malt", nameNL: "Münchener Mout", amount: "0.2 kg", type: .grain, timing: "Mash"),
                RecipeIngredient(name: "Chinook Hops", nameNL: "Chinook Hop", amount: "30 g", type: .hop, timing: "60 min"),
                RecipeIngredient(name: "Centennial Hops", nameNL: "Centennial Hop", amount: "25 g", type: .hop, timing: "20 min"),
                RecipeIngredient(name: "Cascade Hops", nameNL: "Cascade Hop", amount: "30 g", type: .hop, timing: "5 min"),
                RecipeIngredient(name: "Centennial Hops", nameNL: "Centennial Hop", amount: "25 g", type: .hop, timing: "Dry hop"),
                RecipeIngredient(name: "SafAle US-05", nameNL: "SafAle US-05", amount: "1 pak", type: .yeast, timing: "Fermentatie")
            ],
            instructions: [
                "Single infusion mash at 65°C for 60 minutes",
                "Sparge and collect 25L wort",
                "Boil 60 minutes with hop schedule",
                "Cool to 18°C and pitch yeast",
                "Ferment 7 days at 18°C",
                "Dry hop for 4 days",
                "Package and condition 2 weeks"
            ],
            instructionsNL: [
                "Single infusion mash op 65°C gedurende 60 minuten",
                "Spoel en verzamel 25L wort",
                "Kook 60 minuten met hop schema",
                "Koel tot 18°C en voeg gist toe",
                "Fermenteer 7 dagen op 18°C",
                "Dry hop gedurende 4 dagen",
                "Verpak en conditioneer 2 weken"
            ],
            notes: "2024 National Homebrew Competition gold medal winner. Perfect balance of malt sweetness and hop character.",
            notesNL: "2024 National Homebrew Competition gouden medaille winnaar. Perfecte balans van moutzoetheid en hop karakter.",
            tips: [
                "Classic C-hops showcase American IPA character",
                "Maintain fermentation temperature for clean profile",
                "Dry hop timing is critical for aroma retention"
            ],
            tipsNL: [
                "Klassieke C-hops tonen Amerikaanse IPA karakter",
                "Handhaaf fermentatietemperatuur voor schoon profiel",
                "Dry hop timing is cruciaal voor aroma retentie"
            ],
            tags: ["award-winner", "ipa", "american", "gold-medal", "classic"],
            source: "2024 NHC Gold Medal Recipe",
            category: "awards"
        )
    }
    
    // Add helper method for recipe ingredients with localization
    static func localizeIngredients(_ ingredients: [RecipeIngredient]) -> [RecipeIngredient] {
        return ingredients.map { ingredient in
            var localized = ingredient
            if LocalizationManager.shared.currentLanguage == .dutch {
                localized.name = ingredient.nameNL ?? ingredient.name
            }
            return localized
        }
    }
}

// MARK: - Enhanced Data Models

struct RecipeCategory: Identifiable, Codable {
    let id: String
    let name: String
    let nameEN: String
    let icon: String
    let color: RecipeCategoryColor
    let description: String
    let descriptionEN: String
    let recipes: [DetailedRecipe]
    let displayOrder: Int
    
    var localizedName: String {
        LocalizationManager.shared.currentLanguage == .dutch ? name : nameEN
    }
    
    var localizedDescription: String {
        LocalizationManager.shared.currentLanguage == .dutch ? description : descriptionEN
    }
}

enum RecipeCategoryColor: String, Codable {
    case red, orange, yellow, green, blue, purple, indigo
    
    var color: Color {
        switch self {
        case .red: return .red
        case .orange: return .orange
        case .yellow: return .yellow
        case .green: return .green
        case .blue: return .blue
        case .purple: return .purple
        case .indigo: return .indigo
        }
    }
}

// Enhanced DetailedRecipe with internationalization
extension DetailedRecipe {
    init(
        id: String,
        name: String,
        nameNL: String,
        style: String,
        styleNL: String,
        abv: Double,
        ibu: Int,
        srm: Int,
        difficulty: BrewingDifficulty,
        brewTime: Int,
        successRate: Int,
        popularity: Double,
        ingredients: [RecipeIngredient],
        instructions: [String],
        instructionsNL: [String],
        notes: String,
        notesNL: String,
        tips: [String],
        tipsNL: [String],
        tags: [String],
        source: String,
        category: String
    ) {
        self.id = UUID()
        self.name = LocalizationManager.shared.currentLanguage == .dutch ? nameNL : name
        self.style = LocalizationManager.shared.currentLanguage == .dutch ? styleNL : style
        self.abv = abv
        self.ibu = ibu
        self.srm = srm
        self.difficulty = difficulty
        self.brewTime = brewTime
        self.successRate = successRate
        self.popularity = popularity
        self.ingredients = DefaultRecipesDatabase.localizeIngredients(ingredients)
        self.instructions = LocalizationManager.shared.currentLanguage == .dutch ? instructionsNL : instructions
        self.notes = LocalizationManager.shared.currentLanguage == .dutch ? notesNL : notes
        self.tips = LocalizationManager.shared.currentLanguage == .dutch ? tipsNL : tips
        self.tags = tags
        self.source = source
        self.category = category
        self.createdDate = Date()
        self.isUserCreated = false
        self.photos = []
        self.ratings = []
        self.averageRating = popularity
    }
}

extension RecipeIngredient {
    var nameNL: String? {
        // This would be populated with Dutch translations
        return nil
    }
} 